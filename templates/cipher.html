{%extends "base.html"%}

{%block title%}Classial Ciphers {%endblock%}

{%block content%}

<div class="container">
    <header>
        <h1>Encoder/Decoder</h1>
        <p>A simple tool for encrypting and decrypting text with various ciphers.</p>
    </header>

    <main>
        <div class="box">
            <h2 class="box-title">Input</h2>
            <div class="box-content">
                <form method="POST" id="cipher-form" action="{{url_for('cipher.cipher')}}">
                    <div class="form-group">
                        <label for="text-input">Plain Text</label>
                        <textarea id="text-input" name="text" placeholder="Enter your text here" required></textarea>
                    </div>

                    <div class="form-group">
                        <label for="algo-select">Cipher Algorithm</label>
                        <select id="algo-select" name="algo">
                            <option value="caesar">Caesar</option>
                            <option value="shift">Shift Cipher</option>
                            <option value="atbash">Atbash</option>
                            <option value="simple_substitution">Simple Substitution</option>
                            <option value="polybius_square">Polybius Square</option>
                            <option value="baconian">Baconian</option>
                            <option value="rot13">Rot13</option>
                            <option value="mixed_alphabet">Mixed Alphabet</option>
                        </select>
                    </div>

                    <div class="form-group" id="keyword-group" style="display: none;">
                        <label for="keyword-input">Keyword</label>
                        <input id="keyword-input" name="keyword" placeholder="Enter keyword">
                    </div>

                    <div class="form-group" id="shift-group" style="display: none;">
                        <label for="shift-input">Shift Amount: <output>3</output></label>
                        <input type="range" id="shift-input" name="shift" min="1" max="25" value="3"
                            oninput="this.previousElementSibling.querySelector('output').value = this.value">
                    </div>

                    <div class="form-group" id="cipher-alphabets-group" style="display: none;">
                        <label for="cipher-alphabets-input">Cipher Alphabets</label>
                        <div class="input-with-button">
                            <input id="cipher-alphabets-input" name="cipher_alphabets"
                                placeholder="Enter 26 unique letters or generate" value="{{ cipher_alphabets or '' }}">
                            <button type="submit" name="action" value="generate" class="btn">Generate</button>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn primary" type="submit" name="action" value="encrypt">Encrypt</button>
                        <button class="btn" type="submit" name="action" value="decrypt">Decrypt</button>
                    </div>
                </form>
            </div>
        </div>

        {% if result %}
        <div class="box result">
            <h2 class="box-title">Result</h2>
            <div class="box-content">
                <h3>Cipher Text</h3>
                <pre>{{ result }}</pre>
            </div>
        </div>
        {% endif %}
    </main>
</div>
{%endblock%}